{{define "content"}}
<section class="filters">
  <form method="get">
    <label>Category:
      <select name="cat">
        <option value="">-- all --</option>
        {{range .Categories}}
          <option value="{{.Name}}" {{if eq $.Filters.Category .Name}}selected{{end}}>{{.Name}}</option>
        {{end}}
      </select>
    </label>
    {{if .UserID}}
    <label><input type="checkbox" name="mine" value="1" {{if .Filters.Mine}}checked{{end}}> My posts</label>
    <label><input type="checkbox" name="liked" value="1" {{if .Filters.Liked}}checked{{end}}> Liked</label>
    {{end}}
    <button>Filter</button>
  </form>
</section>

<section class="posts">
  {{range .Posts}}
  <article class="post">
    <header>
      <h3>{{.Title}}</h3>
      <div class="meta">by {{.Author}} • {{.Created}} • {{range .Cats}}<span class="chip">{{.}}</span>{{end}}</div>
    </header>
    <p>{{.Content}}</p>
    <footer>
      <form action="/react" method="post" style="display:inline">
        <input type="hidden" name="target" value="post">
        <input type="hidden" name="id" value="{{.ID}}">
        <input type="hidden" name="value" value="1">
        <button type="submit">👍 {{.Likes}}</button>
      </form>
      <form action="/react" method="post" style="display:inline">
        <input type="hidden" name="target" value="post">
        <input type="hidden" name="id" value="{{.ID}}">
        <input type="hidden" name="value" value="-1">
        <button type="submit">👎 {{.Dislikes}}</button>
      </form>
      {{if $.UserID}}
      <form action="/comment/create" method="post" class="inline">
        <input type="hidden" name="post_id" value="{{.ID}}">
        <input name="content" placeholder="Add a comment..." required>
        <button>Comment</button>
      </form>
      {{end}}
    </footer>
  </article>
  {{else}}
    <p>No posts yet.</p>
  {{end}}
</section>
{{end}}
